/*Marquee.js|@author:ScottMunn.com|@version:0.7.3*/function activate_marquee_hashchange(){var e=window.location.hash;var t=$(settings.selector.nav).find('li a[href*="'+e+'"]');$("._autoCurrentHash").removeClass("_autoCurrentHash");$.each(t,function(){var e=$(this),t=e.parent("li").index(),n=e.parents(settings.selector.slider).first();n.trigger("hashUpdate").marqueeGoTo(t)});update_current_hashlinks(e)}function update_current_hashlinks(e){$("._autoCurrentHash").removeClass("_autoCurrentHash");if(e!=""&&e!="#"){$('a[href*="'+e+'"]').not(settings.selector.nav+' li a[href*="'+e+'"]').addClass("_autoCurrentHash")}}function cloneObject(e){for(i in e){if(typeof e[i]=="source"){this[i]=new cloneObject(e[i])}else{this[i]=e[i]}}}function setup_marquee_autocenter(e,t){if(e.attr("data-left-offset")=="center"){var n=($(window).width()-e.find(t.selector.panel).width())/2;e.attr("data-left-offset",n).addClass("leftOffsetCentered");var r;$(window).on(t.orientationevent,function(){clearTimeout(r);r=setTimeout(function(){var e=$(".leftOffsetCentered");$.each(e,function(e,n){n=$(n);var r=($(window).width()-n.find(t.selector.panel).width())/2;n.attr("data-left-offset",r).addClass("leftOffsetCentered");n.marqueeGoTo(t.css_active_name,null,t)})},200)})}}function setup_marquee_autosize(e,t){if(t.autosize){var n=e.width();e.addClass("autosized").find(t.selector.panel).add(t.selector.viewport,e).width(n);var r;$(window).on(t.orientationevent,function(){var n=e.width();e.find(t.selector.panel).add(t.selector.viewport,e).width(n).attr("data-width","yes");clearTimeout(r);r=setTimeout(function(){e.marqueeGoTo(t.css_active_name,null,t)},200)})}}function setup_marquee_controls(e,t){e.find(t.selector.nav).find("li").on("click",function(t){t.preventDefault();e.trigger("navClick");$(this).marqueeClick()});if(t.hoverActivate){e.find(t.selector.nav).find("li").on("mouseover",function(t){t.preventDefault();e.trigger("navHover");$(this).marqueeClick()})}e.find(".marquee_prev").first().on("click",function(e){e.preventDefault();$(this).parents(t.selector.slider).trigger("prev").first().marqueeGoTo("prev",null,t)});e.find(".marquee_next").first().on("click",function(e){e.preventDefault();$(this).parents(t.selector.slider).trigger("next").first().marqueeGoTo("next",null,t)});e.find(".marquee_first").first().on("click",function(e){e.preventDefault();$(this).parents(t.selector.slider).trigger("first").first().marqueeGoTo("first",null,t)});e.find(".marquee_last").first().on("click",function(e){e.preventDefault();$(this).parents(t.selector.slider).trigger("last").first().marqueeGoTo("last",null,t)});e.find(".marquee_random").first().on("click",function(e){e.preventDefault();$(this).parents(t.selector.slider).trigger("random").first().marqueeGoTo("random",null,t)});e.find(".marquee_deselect").first().on("click",function(e){e.preventDefault();$(this).parents(t.selector.slider).trigger("deselect").removeClass("has-selection").find(t.current_class).removeClass(t.css_active_name)})}function setup_marquee_swiping(e,t){if(t.enableTouch&&!e.hasClass("clickToFocus")){e.on(t.touchstartevent,function(n){$(this).addClass("swiping");var r=n.clientX,i=$(this).find(t.selector.panels).css("margin-left").replace("px","");if(t.touchstartevent=="mousedown"){n.preventDefault()}var s=n.pageX?n.pageX:n.originalEvent.changedTouches[0].pageX,o=n.pageY?n.pageY:n.originalEvent.changedTouches[0].pageY;$(this).data({start_x:s,start_y:o});if(t.touchMode=="drag"){e.addClass("touch-event-occurring");e.on(t.touchmoveevent,function(n){n.preventDefault();var s=n.pageX?n.pageX:n.originalEvent.changedTouches[0].pageX;var o=s-parseInt(r);var u=parseInt(i)+parseInt(o);e.find(t.selector.panels).css("margin-left",u)})}});e.on(t.touchendevent,function(n){e.off(t.touchmoveevent);setTimeout(function(){e.removeClass("touch-event-occurring").removeClass("swiping")},1e3);var r=false;var i,s,o=n.pageX?n.pageX:n.originalEvent.changedTouches[0].pageX,u=n.pageY?n.pageY:n.originalEvent.changedTouches[0].pageY;var a=$(this).data("start_x")-o,f=$(this).data("start_y")-u;if(a<0){i="left"}else if(a>0){i="right"}if(f<0){s="up"}else if(f>0){s="down"}if(Math.abs(a)>Math.abs(f)){if(Math.abs(a)>t.swipeThreshold){e.trigger("swiped");if(i=="left"){if($(this).find(t.selector.panel).is(t.current_class).index()!=0){$(this).marqueeGoTo("prev",null,t);r=true}else{var l=$(this).find(t.selector.panels).css("margin-left").replace("px","");var c=40;if($(this).attr("data-left-offset")){c=c+$(this).attr("data-left-offset")}$(this).find(t.selector.panels).animate({"margin-left":l+c},200).animate({"margin-left":l},400,jQuery.easing["easeOutBounce"]?"easeOutBounce":"swing");r=true}}else if(i=="right"){if($(this).find(t.selector.panel).find(t.current_class).index()!=parseInt(e.find(t.selector.panel).length-1)){$(this).marqueeGoTo("next",null,t);r=true}else{var l=$(this).find(t.selector.panels).css("margin-left").replace("px","");$(this).find(t.selector.panels).animate({"margin-left":l-40},200).animate({"margin-left":l},400,jQuery.easing["easeOutBounce"]?"easeOutBounce":"swing");r=true}}}}else{}$(this).data({start_x:null,end_x:null});if(r==false&&a>0){e.marqueeGoTo(t.css_active_name,null,t)}})}}function fix_marquee_height(e,t,n,r){if(n.hide_transitions){e.css({height:r+"px"});t.css({height:r+"px"})}else{e.animate({height:r+"px"},n.transition_speed/2);t.animate({height:r+"px"},n.transition_speed/2)}}function marquee_move_margin_left_to_here(e,t,n,r,i,s){t.animate({"margin-left":e},i,"swing",function(){if(n.resizable==true&&r){t.animate({height:r+"px"},i/2);if(s!=undefined){s.animate({height:r+"px"},i/2)}}})}function marqueeClick_update_caption(e,t,n,r){if(e.find("."+n.marquee_caption).length){var i=$(t).find("li:eq("+r+") .caption").html();if(i==null){var i=$(t).find("li:eq("+r+")").attr("title")}if(i){$(e).find("."+n.marquee_caption).fadeTo(500,1).html(i)}else{$(e).find("."+n.marquee_caption).fadeTo(500,0)}}}function setup_marquee_infinite(e,t,n,r){if(e.hasClass("infinite")==true){var i=e.find(t.selector.panels).first(),s=$(i).children(t.selector.panel),o=i.width();if(e.attr("data-infinite-buffer")){var u=parseInt(e.attr("data-infinite-buffer"))+n}else{var u=n}if(u==r||u>r){s.clone().appendTo(i);i.width(o*2);r=r*2+1}if(n<0){n=r;s.clone().prependTo(i);i.width(o*2);r=r*2+1;n=r;var a=true}}}var settings;var global_marquee_settings={css_active_name:"current",fade_text:true,fade_text_selectors:"h1,.summary",hide_transitions:false,transition_speed:500,marquee_caption:"marquee_current_description",autoplay:false,autoplay_slide_duration:4e3,resizable:true,touchstartevent:"ontouchstart"in document.documentElement?"touchstart":"mousedown",touchmoveevent:"ontouchmove"in document.documentElement?"touchmove":"mousemove",touchendevent:"ontouchend"in document.documentElement?"touchend":"mouseup",touchMode:"swipe",enableTouch:true,hoverActivate:false,swipeThreshold:30,autosize:false,orientationevent:"onorientationchange"in window?"orientationchange":"resize",autoselect:true,get current_class(){return"."+this.css_active_name},selector:{slider:".marquee",nav:".marquee-nav",panel:".marquee-panel",panels:".marquee-panels",viewport:".marquee-viewport"}};$.fn.marqueeize=function(e){settings=new cloneObject(global_marquee_settings);if("onhashchange"in window){$(window).bind("hashchange",function(){activate_marquee_hashchange()})}if(window.location.hash){var t=window.location.hash;var n=$(settings.selector.nav).find('li a[href="'+t+'"]');if(n.length==1){index=n.parent("li").index();n.parent("li").addClass(settings.css_active_name).siblings().removeClass(settings.css_active_name);update_current_hashlinks(t)}}return this.each(function(){var t=$(this);var n=new cloneObject(global_marquee_settings);n._m=$(t);n._id=t.attr("id");if(t.hasClass("hasBeenMarqueed")){}else{t.trigger("init");t.addClass("hasBeenMarqueed");if(e){$.extend(n,e)}if(t.hasClass("fixed")){n.resizable=false}if(t.hasClass("hover-activate")){n.hoverActivate=true}else{n.hoverActivate=false}if(t.hasClass("autosize")){n.autosize=true}else{n.autosize=false}if(t.hasClass("no-autoselect")){n.autoselect=false}else{n.autoselect=true}setup_marquee_autocenter(t,n);setup_marquee_autosize(t,n);setup_marquee_controls(t,n);setup_marquee_swiping(t,n);t.each(function(){var e=$(this),t=0;var r=e.find(n.selector.nav).first().find(n.current_class);if(r.length>0){t=r.index()}if(t==0){e.marqueeGoTo("initialize",null,n)}else{e.marqueeGoTo(t,null,n)}var i=e.find(n.selector.panels).first().children(n.selector.panel).length;e.attr("data-original-length",i);if(n.resizable){var s=e.find(n.selector.panel).is(n.css_active_name).clientHeight;e.css({height:s+"px"});e.find(n.selector.viewport).css({height:s+"px"})}})}})};$.fn.marqueeClick=function(e){var t=new cloneObject(global_marquee_settings);return this.each(function(){if(e){$.extend(t,e)}if($(this).hasClass(t.css_active_name)){return}var n=$(this),r=$(this).parents(t.selector.slider).first(),i=$(this).index();n.addClass(t.css_active_name);$(r).marqueeGoTo(i,null,t)})};$.fn.marqueeAutoplay=function(){return this.each(function(){var e=$(this);e.hover(function(){$.data(this,"hover",true)},function(){$.data(this,"hover",false)}).data("hover",false).data("autoplay",true);e.find(settings.selector.nav).click(function(){e.data("autoplay",false)});var t=setInterval(function(){if(!e.data("hover")&&e.data("autoplay")){e.marqueeGoTo("next",null,settings)}},global_marquee_settings.autoplay_slide_duration);e.removeClass("autoplay-off").addClass("autoplay-on").hover(function(){clearInterval(t)},function(){t=setInterval(function(){if(!e.data("hover")&&e.data("autoplay")){e.marqueeGoTo("next",null,settings)}},global_marquee_settings.autoplay_slide_duration)})})};$.fn.marqueeGoTo=function(e,t,n){if(n==undefined){var r=new cloneObject(global_marquee_settings)}else{var r=n}if(e==null){e=0}var i=$(this);return this.each(function(){var n=$(this),i=false,s=n.find(r.selector.panels).first().children(r.current_class).index(),o=n.find(r.selector.panels).first().children(r.selector.panel).length-1;if(s==-1){s=0}switch(e){case"initialize":if(r.autoselect){s=-1;e=0;r.fade_text=false;var u=true;var a=true}else{e=null}break;case r.css_active_name:e=s;i=true;break;case"next":if(n.hasClass("multiple")){var f=Math.floor(n.width()/n.find(r.selector.panel).width());e=parseInt(s+f);if(o-f<=e){e=o-f+1;n.addClass("current-page-last")}}else{e=parseInt(s+1)}break;case"prev":case"previous":if(n.hasClass("multiple")){var f=Math.floor(n.width()/n.find(r.selector.panel).width());e=parseInt(s-f);if(e<0){e=0}n.addClass("current-page-first")}else{e=parseInt(s-1)}break;case"first":e=0;break;case"last":e=o;break;case"random":e=s;while(e==s){e=Math.floor(Math.random()*(parseInt(o)+1))}break}if(e==null){return false}n.addClass("has-selection").removeClass("current-page-first current-page-last");setup_marquee_infinite(n,r,e,o);if(t!=null){e=t}if(s!=e||i){var l=n.find(r.selector.panels).first(),c=n.find(r.selector.viewport).first(),h=n.find(r.selector.nav).first(),p=l.css("margin-left").replace("px",""),d=l.find(r.selector.panel),v=$(d.get(e)),m=v.outerHeight(),g=v.position(),y=parseInt(g.left,10)-parseInt(p,10),b=n.attr("data-left-offset");if(b){y=y-b}var w=n.css("padding-left").replace("px","");y=parseInt(y,10)-parseInt(w,10);h.find(r.current_class).removeClass(r.css_active_name);h.find("li:eq("+e+")").addClass(r.css_active_name);if(e==0){var E="first";var S="current-panel-first";var x="current-panel-last"}else if(e==o){var E="last";var S="current-panel-last";var x="current-panel-first"}else{var x="current-panel-first current-panel-last"}n.removeClass(x+" current-panel-"+n.attr("data-current-panel")).attr("data-current-panel",parseInt(e)+1).addClass(S+" current-panel-"+(parseInt(e)+1));if(E){n.trigger(E)}l.children(r.current_class).removeClass(r.css_active_name);v.addClass(r.css_active_name);marqueeClick_update_caption(n,h,r,e);y=y*-1;if(r.hide_transitions&&s!=-1||u==true){var T=1}else{var T=r.transition_speed}marquee_move_margin_left_to_here(y,l,r,m,T,c);if(a){fix_marquee_height(c,l,r,m)}if(h){update_current_hashlinks(h.find(r.current_class).find("a").attr("href"))}setTimeout(function(){n.trigger("newPanel")},300)}})};$(function(){if($(global_marquee_settings.selector.slider).is(".fade").length>0){$(global_marquee_settings.selector.slider).is(".fade").not(".custom").marqueeize({hide_transitions:true})}if($(".marquee:not(.fade),.marquee.slide").length>0){$(".marquee:not(.fade),.marquee.slide").not(".custom").marqueeize()}if($(global_marquee_settings.selector.slider).is(".autoplay").length>0){$(global_marquee_settings.selector.slider).is(".autoplay").marqueeAutoplay();$(".autoplay .pause").click(function(){var e=$(this).parents(global_marquee_settings.selector.slider).first(),t=e.data("autoplay");if(t){$(this).html("play");e.removeClass("autoplay-on").addClass("autoplay-off").data("autoplay",false)}else{$(this).html("pause");e.removeClass("autoplay-off").addClass("autoplay-on").data("autoplay",true)}})}$(".clickToFocus").find(settings.selector.panel).on("click",function(){if(!$(this).closest(settings.selector.slider).hasClass("swiping")&&!$(this).hasClass(settings.css_active_name)){$(this).closest(settings.selector.slider).trigger("clickToFocus").marqueeGoTo($(this).index())}else{}});$(".clickToFocus").find(settings.selector.panel).find("a").on("click",function(e){if(!$(this).closest(settings.selector.panel).is(settings.current_class)){$(this).closest(settings.selector.slider).marqueeGoTo($(this).closest(settings.selector.panel).index());return false}})})